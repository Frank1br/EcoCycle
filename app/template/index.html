{% extends 'base.html' %}

{% block content %}
<style>
    /* Estilos Específicos da Index */
    .hero-section {
        background-color: #0C4B33; /* Cor de fundo caso não tenha imagem */
        position: relative;
        padding: 80px 0;
        overflow: hidden;
        /* Se quiser imagem de fundo no banner todo: */
        {% if pagina.banner_background %}
        background-image: url('{{ pagina.banner_background.url }}');
        background-size: cover;
        background-position: center;
        {% endif %}
    }
    /* Caixa verde do texto no banner */
    .hero-box {
        background-color: #28a745; /* Verde claro */
        padding: 40px;
        border-radius: 10px;
        color: white;
        max-width: 500px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        position: relative;
        z-index: 2;
    }
    /* Elementos decorativos do fundo */
    .hero-decoration {
        position: absolute;
        right: 0; top: 0; height: 100%; width: 60%;
        background-size: contain;
        opacity: 0.1;
        pointer-events: none;
    }
    
    .section-title { color: #28a745; font-weight: bold; margin-bottom: 1rem; }
    
    .card-custom { border: none; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); background: white; padding: 20px; }
    
    .product-card { border: none; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-radius: 10px; transition: transform 0.2s; background: white; }
    .product-card:hover { transform: translateY(-5px); }
    .product-card img { height: 180px; object-fit: contain; padding: 10px; }
    .btn-buy { background-color: #28a745; color: white; border: none; width: 100%; font-weight: bold; }
    .btn-buy:hover { background-color: #218838; color: white; }
</style>

{% if pagina %}
<!-- Banner Hero -->
<div class="hero-section">
    <div class="hero-decoration"></div>
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <div class="hero-box">
                    <p class="lead fw-bold">{{ pagina.texto_chamada }}</p>
                    <a href="{% url 'cadastro' %}" class="btn btn-light text-success fw-bold px-4 mt-3">Cadastrar</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container py-5">
    <!-- Sobre Nós -->
    <div id="sobre" class="card-custom mb-5">
        <div class="row align-items-center">
            <div class="col-md-6 p-4">
                <h3 class="section-title">Sobre nós</h3>
                <p class="text-muted">{{ pagina.texto_sobre }}</p>
            </div>
            <div class="col-md-6 text-center">
                {% if pagina.imagem_sobre %}
                    <img src="{{ pagina.imagem_sobre.url }}" class="img-fluid rounded" alt="Sobre nós" style="max-height: 300px;">
                {% else %}
                    <div class="bg-light rounded d-flex align-items-center justify-content-center" style="height: 250px; color: #ccc;">Imagem Sobre</div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Produtos -->
    <h3 id="produtos" class="section-title mb-4">Produtos</h3>
    <div class="row mb-5">
        {% for produto in produtos %}
        <div class="col-md-3 col-sm-6 mb-4">
            <div class="card product-card h-100 p-2">
                {% if produto.foto %}
                <img src="{{ produto.foto.url }}" class="card-img-top" alt="{{ produto.nome }}">
                {% endif %}
                <div class="card-body text-center">
                    <h5 class="card-title fw-bold">{{ produto.nome }}</h5>
                    <p class="card-text small text-muted">{{ produto.descricao|truncatechars:50 }}</p>
                    <h5 class="my-3">Preço: R$ {{ produto.preco }}</h5>
                    <a href="{% url 'comprar' produto.id %}" class="btn btn-buy">Comprar</a>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center"><p>Nenhum produto cadastrado.</p></div>
        {% endfor %}
    </div>

    <!-- Contato -->
    <div id="contato" class="card-custom">
        <div class="row">
            <div class="col-md-6 border-end">
                <h3 class="section-title">Contato</h3>
                
                <!-- MAPA GOOGLE REAL (Embed Iframe) -->
                <div class="mb-3 rounded overflow-hidden shadow-sm" style="height: 250px;">
                    <iframe 
                        width="100%" 
                        height="100%" 
                        frameborder="0" 
                        style="border:0" 
                        src="https://maps.google.com/maps?q={{ pagina.endereco|urlencode }}&t=&z=15&ie=UTF8&iwloc=&output=embed" 
                        allowfullscreen>
                    </iframe>
                </div>

                <p class="mb-1"><strong>Endereço:</strong> {{ pagina.endereco }}</p>
                <p class="mb-1"><strong>WhatsApp:</strong> {{ pagina.whatsapp }}</p>
                <p><strong>Email:</strong> {{ pagina.email }}</p>
            </div>
            <div class="col-md-6 ps-md-5">
                <h3 class="section-title">Envie uma mensagem</h3>
                <form method="post">
                    {% csrf_token %}
                    {{ form_contato.as_p }}
                    <button type="submit" class="btn btn-outline-success w-100 mt-2">Enviar</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}